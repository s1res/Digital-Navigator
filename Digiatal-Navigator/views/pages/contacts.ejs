<%- include('../partials/header', { title: '–ö–æ–Ω—Ç–∞–∫—Ç—ã', page: 'contacts' }) %>

  <main>
    <section class="page-header">
      <div class="container">
        <h1>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º</p>
      </div>
    </section>

    <section class="contacts-section">
      <div class="container">
        <% if (typeof query !== 'undefined' && query.success === 'true') { %>
        <div class="success-message">
          <p>‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
        </div>
        <% } %>
        <% if (typeof query !== 'undefined' && query.error === 'true') { %>
        <div class="error-message">
          <p>‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
        </div>
        <% } %>

        <div class="contacts-grid">
          <div class="contact-info">
            <h2>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –û—Ç–¥–µ–ª–µ–Ω–∏—è</h2>
            <div class="coordinator-card">
              <div class="coordinator-avatar">üë®‚Äçüíº</div>
              <h3>–ë–∞–∫—É—Ä–∫–∏–Ω –ú–∞—Ç–≤–µ–π –ú–∞–∫—Å–∏–º–æ–≤–∏—á</h3>
              <div class="contact-details">
                <p><strong>üìß Email:</strong> matveybakurkin@gmail.com</p>
                <p><strong>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (953) 456-60-31</p>
                <p><strong>üïê –†–∞–±–æ—á–∏–µ —á–∞—Å—ã:</strong> –ü–Ω-–ü—Ç, 10:00 - 18:00</p>
              </div>
            </div>

            <div class="social-links">
              <h3>–ú—ã –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö</h3>
              <div class="social-icons">
                <a href="#" class="social-icon" aria-label="VKontakte">VK</a>
                <a href="#" class="social-icon" aria-label="Telegram">TG</a>
                <a href="#" class="social-icon" aria-label="YouTube">YT</a>
                <a href="#" class="social-icon" aria-label="OK">OK</a>
              </div>
            </div>

            <div class="office-info">
              <h3>–ê–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞</h3>
              <p>üìç –≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, –¥. 14</p>
              <p>–û—Ñ–∏—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞, —Ä—è–¥–æ–º —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.</p>
            </div>
          </div>

          <div class="contact-form-wrapper">
            <h2>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h2>
            <form action="/contacts" method="POST" class="contact-form">
              <div class="form-group">
                <label for="name">–ò–º—è *</label>
                <input type="text" id="name" name="name" required>
              </div>
              
              <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" required>
              </div>
              
              <div class="form-group">
                <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="phone" name="phone" placeholder="+7 (XXX) XXX-XX-XX">
              </div>
              
              <div class="form-group">
                <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ *</label>
                <textarea id="message" name="message" rows="5" required></textarea>
              </div>
              
              <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            </form>
          </div>
        </div>

        <div class="map-section">
          <h2>–ö–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏</h2>
          <div class="map-container">
            <div id="yandex-map" style="width: 100%; height: 400px; border-radius: 12px; overflow: hidden;"></div>
            <p class="map-address">üìç –≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, –¥. 14</p>
          </div>
        </div>
      </div>
    </section>
  </main>

<%- include('../partials/footer') %>

<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
<script>
  ymaps.ready(function () {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –û—Ä–µ–Ω–±—É—Ä–≥–∞
    var myMap = new ymaps.Map('yandex-map', {
      center: [51.7682, 55.0969], // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –û—Ä–µ–Ω–±—É—Ä–≥–∞
      zoom: 16,
      controls: ['zoomControl', 'fullscreenControl', 'typeSelector']
    });

    // –ü–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
    ymaps.geocode('–≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, 14', {
      results: 1
    }).then(function (res) {
      var firstGeoObject = res.geoObjects.get(0);
      if (firstGeoObject) {
        var coords = firstGeoObject.geometry.getCoordinates();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã
        myMap.setCenter(coords, 17);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É
        var myPlacemark = new ymaps.Placemark(coords, {
          balloonContentHeader: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä',
          balloonContentBody: '–≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, –¥. 14',
          balloonContentFooter: '–ú–µ—Å—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ –î–≤–∏–∂–µ–Ω–∏—è –ü–µ—Ä–≤—ã—Ö',
          hintContent: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä'
        }, {
          preset: 'islands#blueDotIcon',
          iconColor: '#1E50A0'
        });
        
        myMap.geoObjects.add(myPlacemark);
        
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –±–∞–ª—É–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ
        myPlacemark.events.add('click', function () {
          myPlacemark.balloon.open();
        });
      } else {
        // –ï—Å–ª–∏ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
        var defaultCoords = [51.7682, 55.0969];
        var myPlacemark = new ymaps.Placemark(defaultCoords, {
          balloonContentHeader: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä',
          balloonContentBody: '–≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, –¥. 14',
          balloonContentFooter: '–ú–µ—Å—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ –î–≤–∏–∂–µ–Ω–∏—è –ü–µ—Ä–≤—ã—Ö',
          hintContent: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä'
        }, {
          preset: 'islands#blueDotIcon',
          iconColor: '#1E50A0'
        });
        
        myMap.geoObjects.add(myPlacemark);
      }
    }).catch(function (error) {
      // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      console.log('–û—à–∏–±–∫–∞ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
      var defaultCoords = [51.7682, 55.0969];
      var myPlacemark = new ymaps.Placemark(defaultCoords, {
        balloonContentHeader: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä',
        balloonContentBody: '–≥. –û—Ä–µ–Ω–±—É—Ä–≥, –õ–∏—Ü–µ–π ‚Ññ8, —É–ª. –¢–µ—Ä–µ—à–∫–æ–≤–æ–π, –¥. 14',
        balloonContentFooter: '–ú–µ—Å—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ –î–≤–∏–∂–µ–Ω–∏—è –ü–µ—Ä–≤—ã—Ö',
        hintContent: '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä'
      }, {
        preset: 'islands#blueDotIcon',
        iconColor: '#1E50A0'
      });
      
      myMap.geoObjects.add(myPlacemark);
    });
  });
</script>
